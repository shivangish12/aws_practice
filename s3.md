


## 1. Amazon S3 Overview

Amazon Simple Storage Service (Amazon S3) is an **object storage service** that provides:

- High durability (99.999999999%)
- Scalability
- Security
- Low latency
- Global availability

### Common Use Cases
- Backup and restore  
- Data lakes  
- Static website hosting  
- Media storage  
- Big data analytics  
- Disaster recovery  

---

## 2. Core Concepts

### Buckets
- Containers for storing objects  
- Globally unique names  
- Region-specific  
- Two types:
  - General Purpose Buckets  
  - Directory Buckets (S3 Express One Zone)

---

### Objects
Each object consists of:
- Key (name)
- Value (data)
- Metadata
- Version ID (optional)

---

## 3. Object Keys and Naming

### Characteristics
- UTF-8 encoded  
- Maximum length: 1024 bytes  
- Case-sensitive  
- Flat namespace (no real folders)

### Example
finance/2024/reports/q1.pdf
Folders are logical prefixes.

---

### Key Naming Guidelines

**Allowed**
- Alphanumeric  
- `- _ . ! * ' ( )`

**Avoid**
- `\ { } ^ ~ [ ] < > | " % #`

**Avoid as standalone paths**
- `.`
- `..`

---

### Sorting Behavior
Objects are sorted lexicographically using UTF-8 encoding.

---

## 4. Object Metadata

### System-defined Metadata
Managed by Amazon S3.

Examples:
- Content-Length  
- Last-Modified  
- ETag  
- Storage class  
- Encryption type  

Some fields are mutable (e.g., storage class).

---

### User-defined Metadata
- Added during upload  
- Key-value pairs  
- Stored as `x-amz-meta-*`  
- Immutable after upload  
- Requires copy to modify  
- Maximum size: 2 KB  

---

## 5. Object Operations

### CopyObject
Used for:
- Rename
- Move
- Metadata updates
- Storage class changes
- Cross-region copy

Rules:
- ≤ 5 GB → single operation  
- > 5 GB → multipart copy required  

---


---

### Conditional Reads and Writes

Used for concurrency control.

**Headers**
- `If-Match`
- `If-None-Match`
- `If-Modified-Since`
- `If-Unmodified-Since`

**Use Cases**
- Prevent overwrite  
- Optimistic locking  
- Safe concurrent updates  

---

## 6. Presigned URLs

### Purpose
Temporary access to S3 objects without AWS credentials.

### Supported Operations
- GET
- PUT
- HEAD

### Properties
- Time-limited  
- Uses creator’s permissions  
- Reusable until expiry  

### Expiry
- IAM user: up to 7 days  
- Temporary credentials: until they expire  
- Console-generated: 1–12 hours  

### Security
- Acts as a bearer token  
- Can be restricted using:
  - Source IP
  - Signature age
  - IAM policy conditions  

---

## 7. Storage Classes

| Storage Class | Use Case |
|----------------|---------|
| Standard | Frequently accessed data |
| Intelligent-Tiering | Unknown access patterns |
| Standard-IA | Infrequent access |
| One Zone-IA | Non-critical data |
| Glacier Instant | Archived, fast retrieval |
| Glacier Flexible | Archive |
| Glacier Deep Archive | Long-term archival |
| Express One Zone | Ultra-low latency |

---

## 8. Lifecycle Management

Lifecycle rules automate transitions and deletions.

### Lifecycle Actions

#### Transition Actions
- Standard → IA  
- IA → Glacier  
- Glacier → Deep Archive  

#### Expiration Actions
- Delete objects after a defined period  
- Delete old versions  
- Remove incomplete multipart uploads  

---

### Lifecycle Rule Components
- Filter (prefix or tags)
- Transitions
- Expiration
- Noncurrent version handling

---

### Example
After 30 days → Standard-IA
After 90 days → Glacier
After 365 days → Delete

---

## 9. Access Control

### Identity Types
- Root user  
- IAM users and roles  
- Cross-account users  
- Anonymous users  
- AWS services  
- Corporate identities (IAM Identity Center)

---

### Access Management Tools

| Tool | Description |
|------|-------------|
| IAM policies | Identity-based access |
| Bucket policies | Resource-based access |
| Access Points | Scoped access endpoints |
| S3 Access Grants | Centralized access control |
| ACLs | Legacy (avoid) |
| Object Ownership | Ownership enforcement |

---

### Best Practices
- Block public access  
- Use IAM roles  
- Avoid ACLs  
- Follow least privilege  
- Enable versioning  

---

## 10. Data Protection

### Replication
- Same-region replication (SRR)
- Cross-region replication (CRR)
- Bi-directional replication

---

### Multi-Region Access Points
- Global endpoint
- Automatic routing
- Failover support

---

### Versioning
- Preserves multiple object versions
- Protects against accidental deletions

---

### Object Lock
- Write Once Read Many (WORM)
- Governance mode
- Compliance mode

---

### AWS Backup
- Centralized backup management
- Policy-based backups
- Encrypted storage

---

## 11. Batch Operations

Used for large-scale object operations.

### Supported Operations
- Copy
- Tagging
- Restore
- Lambda invocation
- ACL modification

---

### Components
- Manifest
- Job
- Task

---

### Manifest Types
- CSV
- S3 Inventory
- Auto-generated

---

### Limits
- 4 billion objects per job  
- 20 billion for replication jobs  

---

## 12. Monitoring and Logging

### CloudWatch
- Metrics
- Alarms
- Dashboards

### CloudTrail
- API-level auditing
- Near real-time logs

### Server Access Logs
- Detailed request logs
- Delivered with delay

### Trusted Advisor
- Cost optimization
- Security insights

---

## 13. CloudTrail vs Server Access Logs

| Feature | CloudTrail | Server Access Logs |
|--------|------------|--------------------|
| API visibility | Yes | No |
| Authentication failures | No | Yes |
| Near real-time | Yes | No |
| Encryption | Yes | No |
| Cross-account | Yes | No |

---

## 14. Data Security Best Practices

- Enable Block Public Access  
- Use encryption (SSE-S3, SSE-KMS)  
- Enable versioning  
- Enable Object Lock  
- Use IAM roles  
- Monitor using CloudTrail  

---

## 15. Summary Cheat Sheet

| Topic | Key Point |
|------|----------|
| Object storage | Flat namespace |
| Metadata | Immutable after upload |
| Presigned URLs | Temporary access |
| Lifecycle | Cost optimization |
| Replication | Disaster recovery |
| Versioning | Recovery |
| Batch Ops | Mass operations |
| Logging | Auditing |
| Encryption | Data protection |

---

## 16. Interview Power Points

- S3 is object-based, not file-based  
- Rename = copy + delete  
- Metadata updates require copy  
- Presigned URLs inherit permissions  
- Lifecycle ≠ replication  
- Versioning protects against deletion  
- Block public access is critical  

---

ETag (Entity Tag) is a unique identifier that represents the content (version) of an object stored in Amazon S3.

You can think of it as:

A fingerprint of the object’s data at a point in time.

If the object content changes, the ETag usually changes.
